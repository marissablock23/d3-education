# Make year variable factor
edstats$year <- str_sub(edstats$year, 1, 4)
edstats$year <- as.numeric(edstats$year)
# Make variables names lowercase
colnames(edstats) <- tolower(colnames(edstats))
# Remember that aggregates and regions are included as countries
yrs <- edstats %>%
filter(year==2010) %>%
select(country, bar.schl.15up)
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up") %>%
#write_json(path = "yrs.json")
filter(!is.na(gdp)) %>%
filter(!is.na(yrs))
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up") %>%
#write_json(path = "yrs.json")
filter(!is.na(gdp)) %>%
filter(!is.na(yrs)) %>%
write_csv(path = "data/clean/bench.q.csv")
knitr::opts_chunk$set(echo = TRUE)
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = log(ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
geom_label(aes(label = cntry.code)) +
geom_smooth()
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = log(ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
library(tidyverse)
library(readxl)
library(here)
library(jsonlite)
wdi <- read_csv("../fininc-data/clean/clean.wdi.csv")
# Rename variables
wdi <- rename(wdi, country = "country.x")
# Returns to schooling
returns <- read_xlsx("data/ReturnsEdAnnex2.xlsx", sheet = "Sheet 1",
na = "", skip = 7)
# Rename variables
returns <- returns %>%
rename("country" = "..1", "year"= "..2", "Region" = "..3", "inc" = "..4", "yrs.sch" = "..5", "overall" = "..6", "primary" = "Prim..7", "secondary" = "Sec..8", "higher" = "Higher..9", "primary.soc" = "Prim..13", "secondary.soc" = "Sec..14", "higher.soc" = "Higher..15", "male" = "Males", "female" = "Females", "private" = "Private", "public" = "Public", "source" = "See Annex 3")
# Ignore full discounting, private for now
# Remove first row
returns <- returns[-1,]
# World Bank Ed Stats
edstats <- read_csv("data/wb_edstats.csv", na = "..",
col_types = cols(
`2007 [YR2007]` = col_number()
))
# Drop last 5 rows
edstats <- head(edstats, -5)
# Rename variables
edstats <- rename(edstats, country = "Country Name", cntry.code = "Country Code")
# Reshape year variables to column
edstats <- edstats %>%
gather(`2007 [YR2007]`, `2008 [YR2008]`, `2009 [YR2009]`, `2010 [YR2010]`, `2011 [YR2011]`, `2012 [YR2012]`,
`2013 [YR2013]`, `2014 [YR2014]`, `2015 [YR2015]`, `2016 [YR2016]`, `2017 [YR2017]`,
key = year, value = value)
# Drop Series Name
edstats <- select(edstats, -`Series`)
# Reshape Series Code column to variables
edstats <- edstats %>%
spread(key = `Series Code`, value = value)
# Make year variable factor
edstats$year <- str_sub(edstats$year, 1, 4)
edstats$year <- as.numeric(edstats$year)
# Make variables names lowercase
colnames(edstats) <- tolower(colnames(edstats))
# Remember that aggregates and regions are included as countries
knitr::opts_chunk$set(echo = TRUE)
yrs <- edstats %>%
filter(year==2010) %>%
select(country, bar.schl.15up)
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = log(ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = log10(ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = log10(ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = log(ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = (ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
wdi %>%
select(country, cntry.code, year, ny.gdp.pcap.kd) %>%
filter(year==2017) %>%
left_join(edstats) %>%
select(country, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
ggplot(aes(x = log(ny.gdp.pcap.kd), y = hd.hci.hlos)) +
geom_point() +
geom_label(aes(label=cntry.code)) +
geom_smooth()
returns.ovr %>%
select(country, overall) %>%
arrange(overall) %>%
mutate(country2 = factor(country, levels = .$country)) %>%
ggplot(aes(country, overall)) +
geom_segment(aes(x = 0, xend = return, y = country2, yend = country2)) +
geom_point()
returns.ovr <- returns %>%
group_by(country) %>%
filter(!is.na(overall)) %>%
filter(year == max(year)) %>%
rename(year.return = "year")
returns.ovr %>%
select(country, overall) %>%
arrange(overall) %>%
mutate(country2 = factor(country, levels = .$country)) %>%
ggplot(aes(country, overall)) +
geom_segment(aes(x = 0, xend = return, y = country2, yend = country2)) +
geom_point()
wdi %>%
select(country, cntry.code, year, ny.gdp.pcap.kd) %>%
filter(year==2017) %>%
left_join(edstats) %>%
select(country, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
ggplot(aes(x = log(ny.gdp.pcap.kd), y = hd.hci.hlos)) +
geom_point() +
geom_label(aes(label=cntry.code)) +
geom_smooth()
yrs <- edstats %>%
filter(year==2010) %>%
select(country, bar.schl.15up, year)
test <- edstats %>%
filter(year==2017) %>%
select(country, hd.hci.hlos, year)
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up" score = "hd.hci.hlos") %>%
#write_json(path = "yrs.json")
#filter(!is.na(gdp)) %>%
#filter(!is.na(yrs)) %>%
write_csv(path = "data/clean/bench.q.csv")
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos)
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up", score = "hd.hci.hlos") %>%
#write_json(path = "yrs.json")
#filter(!is.na(gdp)) %>%
#filter(!is.na(yrs)) %>%
write_csv(path = "data/clean/bench.csv")
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up", score = "hd.hci.hlos")
yrs
test
yrs <- edstats %>%
filter(year==2010) %>%
select(country, bar.schl.15up)
test <- edstats %>%
filter(year==2017) %>%
select(country, hd.hci.hlos)
test
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up", score = "hd.hci.hlos")
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up", score = "hd.hci.hlos") %>%
#write_json(path = "yrs.json")
#filter(!is.na(gdp)) %>%
#filter(!is.na(yrs)) %>%
write_csv(path = "data/clean/bench.csv")
wdi %>%
filter(year==2016) %>%
left_join(yrs) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code) %>%
ggplot(aes(x = (ny.gdp.pcap.kd), y = bar.schl.15up)) +
geom_point() +
#geom_label(aes(label = cntry.code)) +
geom_smooth()
table(wdi$country[ny.gdp.pcap.kd>90000])
table(wdi$country[wdi$ny.gdp.pcap.kd>90000])
wdi <- read_csv("../fininc-data/clean/clean.wdi.csv")
# Rename variables
wdi <- rename(wdi, country = "country.x")
# Returns to schooling
returns <- read_xlsx("data/ReturnsEdAnnex2.xlsx", sheet = "Sheet 1",
na = "", skip = 7)
# Rename variables
returns <- returns %>%
rename("country" = "..1", "year"= "..2", "Region" = "..3", "inc" = "..4", "yrs.sch" = "..5", "overall" = "..6", "primary" = "Prim..7", "secondary" = "Sec..8", "higher" = "Higher..9", "primary.soc" = "Prim..13", "secondary.soc" = "Sec..14", "higher.soc" = "Higher..15", "male" = "Males", "female" = "Females", "private" = "Private", "public" = "Public", "source" = "See Annex 3")
# Ignore full discounting, private for now
# Remove first row
returns <- returns[-1,]
# World Bank Ed Stats
edstats <- read_csv("data/wb_edstats.csv", na = "..",
col_types = cols(
`2007 [YR2007]` = col_number()
))
# Drop last 5 rows
edstats <- head(edstats, -5)
# Rename variables
edstats <- rename(edstats, country = "Country Name", cntry.code = "Country Code")
# Reshape year variables to column
edstats <- edstats %>%
gather(`2007 [YR2007]`, `2008 [YR2008]`, `2009 [YR2009]`, `2010 [YR2010]`, `2011 [YR2011]`, `2012 [YR2012]`,
`2013 [YR2013]`, `2014 [YR2014]`, `2015 [YR2015]`, `2016 [YR2016]`, `2017 [YR2017]`,
key = year, value = value)
# Drop Series Name
edstats <- select(edstats, -`Series`)
# Reshape Series Code column to variables
edstats <- edstats %>%
spread(key = `Series Code`, value = value)
# Make year variable factor
edstats$year <- str_sub(edstats$year, 1, 4)
edstats$year <- as.numeric(edstats$year)
# Make variables names lowercase
colnames(edstats) <- tolower(colnames(edstats))
# Remember that aggregates and regions are included as countries
library(tidyverse)
library(readxl)
library(here)
library(jsonlite)
### Clean Data
# WDI
wdi <- read_csv("../fininc-data/clean/clean.wdi.csv")
# Rename variables
wdi <- rename(wdi, country = "country.x")
# Returns to schooling
returns <- read_xlsx("data/ReturnsEdAnnex2.xlsx", sheet = "Sheet 1",
na = "", skip = 7)
# Rename variables
returns <- returns %>%
rename("country" = "..1", "year"= "..2", "Region" = "..3", "inc" = "..4", "yrs.sch" = "..5", "overall" = "..6", "primary" = "Prim..7", "secondary" = "Sec..8", "higher" = "Higher..9", "primary.soc" = "Prim..13", "secondary.soc" = "Sec..14", "higher.soc" = "Higher..15", "male" = "Males", "female" = "Females", "private" = "Private", "public" = "Public", "source" = "See Annex 3")
# Ignore full discounting, private for now
# Remove first row
returns <- returns[-1,]
# World Bank Ed Stats
edstats <- read_csv("data/wb_edstats.csv", na = "..",
col_types = cols(
`2007 [YR2007]` = col_number()
))
# Drop last 5 rows
edstats <- head(edstats, -5)
# Rename variables
edstats <- rename(edstats, country = "Country Name", cntry.code = "Country Code")
# Reshape year variables to column
edstats <- edstats %>%
gather(`2007 [YR2007]`, `2008 [YR2008]`, `2009 [YR2009]`, `2010 [YR2010]`, `2011 [YR2011]`, `2012 [YR2012]`,
`2013 [YR2013]`, `2014 [YR2014]`, `2015 [YR2015]`, `2016 [YR2016]`, `2017 [YR2017]`,
key = year, value = value)
# Drop Series Name
edstats <- select(edstats, -`Series`)
# Reshape Series Code column to variables
edstats <- edstats %>%
spread(key = `Series Code`, value = value)
# Make year variable factor
edstats$year <- str_sub(edstats$year, 1, 4)
edstats$year <- as.numeric(edstats$year)
# Make variables names lowercase
colnames(edstats) <- tolower(colnames(edstats))
# Remember that aggregates and regions are included as countries
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg)
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
ggplot() +
geom_line(aes(x = year, y = ny.gdp.mktp.kd.zg)) +
geom_line(aes(x = year, y = secGrowth))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot() +
geom_line(aes(x = year, y = ny.gdp.mktp.kd.zg)) +
geom_line(aes(x = year, y = secGrowth))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_segment(aes(xend = c(tail(ny.gdp.mktp.kd.zg), NA)),
yend = c(tail(secGrowth), NA))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_segment(aes(xend = c(tail(ny.gdp.mktp.kd.zg), NA)),
yend = c(tail(secGrowth), NA))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point()
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(label = year)
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(label = label)
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Bolivia") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr))
wdi %>%
select(year, country, se.sec.enrr, ny.gdp.mktp.kd.zg) %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Albania") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year))
wdi.time <- read_csv("data/wdi_timesseries.csv", na = "..",
col_types = cols(
`2004 [YR2004]` = col_number()
))
wdi.time <- read_csv("data/wdi_timeseries.csv", na = "..",
col_types = cols(
`2004 [YR2004]` = col_number()
))
head(wdi)
tail(wdi)
wdi.time <- head(wdi.time, -5)
wdi.time <- rename(wdi.time, country = "Country Name", cntry.code = "Country Code")
# Reshape year variables to column
wdi.time <- wdi.time %>%
gather(`2004 [YR2004]`, `2005 [YR2005]`, `2006 [YR2006]`, `2007 [YR2007]`, `2008 [YR2008]`, `2009 [YR2009]`, `2010 [YR2010]`,
`2011 [YR2011]`, `2012 [YR2012]`, `2013 [YR2013]`, `2014 [YR2014]`, `2015 [YR2015]`, `2016 [YR2016]`, `2017 [YR2017]`,
key = year, value = value)
# Drop Series Name
wdi.time <- select(wdi.time, -`Series Name`)
# Reshape Series Code column to variables
wdi.time <- wdi.time %>%
spread(key = `Series Code`, value = value)
# Drop variables with all NAs
wdi.time <- wdi.time[, colSums(is.na(wdi.time)) != nrow(wdi.time)]
# Make variables names lowercase
colnames(wdi.time) <- tolower(colnames(wdi.time))
colnames(wdi.time)
head(wdi.time)
wdi.time %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Albania") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year))
# Make year variable factor
wdi.time$year <- str_sub(wdi.time$year, 1, 4)
wdi.time$year <- as.factor(wdi.time$year)
wdi.time %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Albania") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year))
?tail
wdi.time %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Albania") %>%
ggplot(aes(x = ny.gdp.mktp.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year)) +
geom_segment(aes(xend=c(tail(ny.gdp.mktp.kd.zg, n = -1), NA),
yend=c(tail(secGrowth, n = -1), NA)))
wdi.time %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Albania") %>%
ggplot(aes(x = ny.gdp.pcap.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year)) +
geom_segment(aes(xend=c(tail(ny.gdp.pcap.kd.zg, n = -1), NA),
yend=c(tail(secGrowth, n = -1), NA)))
install.packages("grid")
library(gride)
library(grid)
wdi.time %>%
group_by(country) %>%
mutate(secGrowth = (se.sec.enrr - lag(se.sec.enrr))/lag(se.sec.enrr)) %>%
filter(country=="Albania") %>%
ggplot(aes(x = ny.gdp.pcap.kd.zg, y = secGrowth, label = year)) +
geom_point() +
geom_label(aes(label = year)) +
geom_segment(aes(xend=c(tail(ny.gdp.pcap.kd.zg, n = -1), NA),
yend=c(tail(secGrowth, n = -1), NA)),
arrow = arrow(length=unit(0.3, "cm")))
knitr::opts_chunk$set(echo = TRUE)
returns.ovr <- returns %>%
group_by(country) %>%
filter(!is.na(overall)) %>%
filter(year == max(year)) %>%
rename(year.return = "year")
returns.ovr %>%
select(country, overall) %>%
arrange(overall) %>%
mutate(country2 = factor(country, levels = .$country)) %>%
ggplot(aes(country, overall)) +
geom_segment(aes(x = 0, xend = return, y = country2, yend = country2)) +
geom_point()
returns
write_csv(returns, path = "data/clean/returns.csv")
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up", score = "hd.hci.hlos") %>%
full_join(returns, by = "country")
yrs <- edstats %>%
filter(year==2010) %>%
select(country, bar.schl.15up)
# Filter to 2017 for harmonized test scores
test <- edstats %>%
filter(year==2017) %>%
select(country, hd.hci.hlos)
wdi %>%
filter(year==2017) %>%
left_join(yrs) %>%
left_join(test) %>%
select(country, bar.schl.15up, ny.gdp.pcap.kd, cntry.code, hd.hci.hlos) %>%
rename(gdp = "ny.gdp.pcap.kd", cntrycode = "cntry.code", yrs = "bar.schl.15up", score = "hd.hci.hlos") %>%
full_join(returns, by = "country")
